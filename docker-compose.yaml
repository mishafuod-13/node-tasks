  
version: '3'
services:
 node:
    build: .
    volumes:
        - ./src/resources/middleware/logs/:/usr/app/logs/
        - ./:/usr/app/ 
    container_name: 'node'
    networks: 
      - app
    ports:
      - ${PORT}:${PORT}
    networks:
        - app
    environment:
       PORT: ${PORT}
    restart: on-failure
 postgres:
    build: ./database/
    volumes:
      - ./database/:/usr/app/database/
      - ./migration/:/usr/app/migration/
    ports:
      - ${POSTGRES_PORT}:${POSTGRES_PORT}
    environment:
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${POSTGRES_DB}
      POSTGRES_PORT: ${POSTGRES_PORT}
    networks:
      - app
    restart: always

networks:
  app: 
    driver: bridge